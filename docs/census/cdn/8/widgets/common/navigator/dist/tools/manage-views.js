System.register(["jimu-core","jimu-ui","jimu-core/emotion","jimu-for-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui/basic/list-tree"],function(e,t){var i={},o={},n={},l={},a={},s={},r={};return{setters:[function(e){i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.Immutable=e.Immutable,i.React=e.React,i.ReactRedux=e.ReactRedux,i.appActions=e.appActions,i.classNames=e.classNames,i.css=e.css,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.i18n=e.i18n},function(e){o.Button=e.Button,o.Tooltip=e.Tooltip,o.defaultMessages=e.defaultMessages},function(e){n.jsx=e.jsx},function(e){l.appBuilderSync=e.appBuilderSync,l.builderAppSync=e.builderAppSync,l.getAppConfigAction=e.getAppConfigAction},function(){},function(e){s.useTheme=e.useTheme},function(e){r.List=e.List}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=s},4108:e=>{"use strict";e.exports=l},12907:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 6"><circle cx="1104" cy="1049" r="3" fill="#000" fill-rule="nonzero" transform="translate(-1101 -1046)"></circle></svg>'},14321:e=>{"use strict";e.exports=o},37568:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.54.54 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.54.54 0 0 1 .738 0" clip-rule="evenodd"></path></svg>'},41496:e=>{"use strict";e.exports=a},52943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},67386:e=>{"use strict";e.exports=n},73549:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.667 4.667 11.333 0 16 4.667l-4.667 4.666zM0 1.333V8h6.667V1.333zM6.667 16H0V9.333h6.667zM8 16V9.333h6.667V16z" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=i},82606:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M1.25 2.5h17.5v11.25H1.25zM0 2.5c0-.69.56-1.25 1.25-1.25h17.5c.69 0 1.25.56 1.25 1.25v11.25c0 .69-.56 1.25-1.25 1.25H1.25C.56 15 0 14.44 0 13.75zm3.75 16.25h2.5V17.5h-2.5zm7.5 0h-2.5V17.5h2.5zm2.5 0h2.5V17.5h-2.5z" clip-rule="evenodd"></path></svg>'},91455:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M20 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2zM2 1h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M9 4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zM4 8V4h4v4zM17 4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zm-5 4V4h4v4zM9 12a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zm-5 4v-4h4v4zM17 14a3 3 0 1 0-6 0 3 3 0 0 0 6 0m-5 0a2 2 0 1 1 4 0 2 2 0 0 1-4 0" clip-rule="evenodd"></path></svg>'},98640:e=>{"use strict";e.exports=r}},t={};function d(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,d),n.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var u={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(u),d.d(u,{default:()=>j});var e,t=d(79244);!function(e){e.Auto="AUTO",e.Custom="CUSTOM"}(e||(e={}));var i=d(14321),o=d(67386),n=d(4108);d(41496),d(82606);var l=d(1888);const{useEffect:a,useMemo:s,useCallback:r}=t.React,{useSelector:p,useDispatch:v}=t.ReactRedux;d(12907),d(37568),d(52943);var c=d(98640),g=d(62838),m=d.n(g),f=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i};const h=e=>{const i=window.SVG,{className:n}=e,l=f(e,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",n);return i?(0,o.jsx)(i,Object.assign({className:a,src:m()},l)):(0,o.jsx)("svg",Object.assign({className:a},l))},w=e=>t.css`
  width: 300px;
  height: 350px;
  overflow-y: auto;
  .jimu-tree-main {
    padding: 4px;
  }
  .jimu-tree-item__main-line {
    height: 32px;
    background-color: ${e.ref.palette.neutral[500]};
    &:hover {
      background-color: ${e.ref.palette.neutral[600]};
    }
    color: ${e.ref.palette.neutral[1100]};
  }
  .jimu-tree-item__body {
    border: none !important;
  }
`,S=a=>{const{widgetId:s}=a,r=t.hooks.useTranslation(i.defaultMessages),d=(0,l.useTheme)(),u=t.ReactRedux.useSelector(e=>{var t;return null===(t=(e.appStateInBuilder?e.appStateInBuilder:e).appConfig.widgets[s])||void 0===t?void 0:t.config}),v=null==u?void 0:u.data,g=((i,o,n)=>{const l=p(e=>{var t,o,n,l,a,s,r;return(null==e?void 0:e.appStateInBuilder)?null===(l=null===(n=null===(o=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===o?void 0:o.sections)||void 0===n?void 0:n[i])||void 0===l?void 0:l.views:null===(r=null===(s=null===(a=null==e?void 0:e.appConfig)||void 0===a?void 0:a.sections)||void 0===s?void 0:s[i])||void 0===r?void 0:r.views});return t.React.useMemo(()=>{const i=((n===e.Custom?o:l)||(0,t.Immutable)([])).asMutable();return i.sort((e,t)=>(null==l?void 0:l.indexOf(e))-(null==l?void 0:l.indexOf(t))),(0,t.Immutable)(i)},[o,l,n])})(null==v?void 0:v.section,null==v?void 0:v.views,null==v?void 0:v.type),m=(e=>{const i=p(e=>{var t,i,o;return(null==e?void 0:e.appStateInBuilder)?null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.views:null===(o=null==e?void 0:e.appConfig)||void 0===o?void 0:o.views});return t.React.useMemo(()=>e.asMutable({deep:!0}).map(e=>{var t;return{id:e,label:null===(t=i[e])||void 0===t?void 0:t.label}}),[e,i])})(g),f=(null==v?void 0:v.type)===e.Auto;return(0,o.jsx)("div",{className:"p-3",css:w(d),children:(0,o.jsx)(c.List,{size:"default",itemsJson:m.map(e=>({itemKey:e.id,itemStateTitle:e.label,itemStateDisabled:1===(null==m?void 0:m.length)})),dndEnabled:f,isMultiSelection:!1,renderOverrideItemCommands:(e,t)=>{const l=t.props.itemJsons[0];return!(null==l?void 0:l.itemStateDisabled)?(0,o.jsx)(i.Tooltip,{title:r("deleteOption"),children:(0,o.jsx)(i.Button,{className:"p-0",onClick:()=>{(e=>{(0,n.getAppConfigAction)().removeView(e.itemKey,null==v?void 0:v.section).exec()})(l)},type:"tertiary",icon:!0,children:(0,o.jsx)(h,{size:"s"})})}):null},onDidDrop:(e,t)=>{const{itemJsons:i}=t.props,[,o]=i,l=o.map(e=>e.itemKey);var a;l.join(",")!==g.join(",")&&(a=l,(0,n.getAppConfigAction)().editSectionProperty(null==v?void 0:v.section,"views",a).exec())}})})};var x=d(91455),b=d.n(x),M=d(73549),y=d.n(M);class j{constructor(){this.index=2,this.id="navigator-manage-views"}getAppState(){const e=(0,t.getAppStore)().getState();return e.appStateInBuilder?e.appStateInBuilder:e}visible(i){var o,n,l,a,s;const r=i.layoutItem.widgetId,d=(null===(l=null===(n=null===(o=this.getAppState().appConfig.widgets[r])||void 0===o?void 0:o.config)||void 0===n?void 0:n.data)||void 0===l?void 0:l.type)===e.Auto,u=(null===(s=null===(a=this.getAppState())||void 0===a?void 0:a.appRuntimeInfo)||void 0===s?void 0:s.appMode)===t.AppMode.Express;return d&&u}getGroupId(){return null}getTitle(){const e=t.i18n.getIntl("_jimu");return e?e.formatMessage({id:"manageViews",defaultMessage:i.defaultMessages.manageViews}):"Manage views"}checked(){if(this.getAppState().browserSizeMode===t.BrowserSizeMode.Small)return this.isOpenInSidePanel}getIcon(){return window.jimuConfig.isBuilder?y():b()}widgetToolbarStateChange(e){window.jimuConfig.isBuilder?n.builderAppSync.publishWidgetToolbarStateChangeToApp(e,["navigator-manage-views"]):(0,t.getAppStore)().dispatch(t.appActions.widgetToolbarStateChange(e,["navigator-manage-views"]))}onClick(e){const i=e.layoutItem.widgetId;if(this.getAppState().browserSizeMode===t.BrowserSizeMode.Small){this.isOpenInSidePanel=!this.isOpenInSidePanel;const e=()=>{this.isOpenInSidePanel=!1,this.widgetToolbarStateChange(i)};n.appBuilderSync.publishSidePanelToApp({type:"navigatorManageViews",widgetId:i,uri:"widgets/common/navigator/",onClose:e,active:this.isOpenInSidePanel})}}getSettingPanel(){var e;return(null===(e=this.getAppState())||void 0===e?void 0:e.browserSizeMode)===t.BrowserSizeMode.Small?null:S}}})(),u})())}}});