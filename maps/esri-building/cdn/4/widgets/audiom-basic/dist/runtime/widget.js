System.register(["jimu-core/emotion","jimu-core","jimu-arcgis","esri/layers/FeatureLayer"],function(e,t){var s={},i={},r={},a={};return{setters:[function(e){s.jsx=e.jsx,s.jsxs=e.jsxs},function(e){i.DataSourceManager=e.DataSourceManager,i.React=e.React},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){a.default=e.default}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=i},386:e=>{"use strict";e.exports=s},633:e=>{"use strict";e.exports=a},686:e=>{"use strict";e.exports=r}},t={};function o(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var n={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(n),o.d(n,{__set_webpack_public_path__:()=>S,default:()=>w});var e,t,s,i=o(386),r=o(244),a=o(686);!function(e){e.Kilometers="km",e.Meters="m",e.Miles="mi",e.Feet="ft"}(e||(e={}));class u{constructor(e,t){if(e<=0)throw new Error("Step size value must be positive");this.value=e,this.unit=t}static Kilometers(t){return new u(t,e.Kilometers)}static Meters(t){return new u(t,e.Meters)}static Miles(t){return new u(t,e.Miles)}static Feet(t){return new u(t,e.Feet)}static parse(t){const s=t.match(/^(\d+(?:\.\d+)?)(km|m|mi|ft)?$/);if(!s)throw new Error(`Invalid step size format: ${t}`);const i=parseFloat(s[1]),r=s[2]||e.Meters;return new u(i,r)}toString(){return`${this.value}${this.unit}`}}!function(e){e.Travel="travel",e.Heatmap="heatmap",e.Indoor="indoor"}(t||(t={})),function(e){e.OSM="osm",e.TDEI="TDEI",e.ESRI="esri",e.GeoJSON="geojson"}(s||(s={}));class c{constructor(e){this.source=e.source,this.type=e.type,this.mapType=e.mapType,this.name=e.name,this.url=e.url,this.rules=e.rules,this.additionalParams=e.additionalParams}static fromName(e){return new c({source:e})}static fromGeoJsonUrl(e,t){return new c({source:e,type:s.GeoJSON,name:t})}static fromEsri(e){return new c({source:e.source,type:s.ESRI,url:e.url,name:e.name,mapType:e.mapType,rules:e.rules})}toQueryParams(){const e={};return this.type&&(e[`${this.source}.type`]=this.type),this.mapType&&(e[`${this.source}.mapType`]=this.mapType),this.name&&(e[`${this.source}.name`]=this.name),this.url&&(e[`${this.source}.url`]=this.url),this.rules&&(e[`${this.source}.rules`]=this.rules),this.additionalParams&&Object.entries(this.additionalParams).forEach(([t,s])=>{e[`${this.source}.${t}`]=String(s)}),e}}class h{constructor(e){this.embedId=e.embedId,this.apiKey=e.apiKey,e.sources&&(this.sources=e.sources.map(e=>"string"==typeof e?c.fromName(e):new c(e))),this.center=e.center,this.latitude=e.latitude,this.longitude=e.longitude,this.zoom=e.zoom,this.soundpack=e.soundpack,this.demo=e.demo,this.title=e.title,this.showVisualMap=e.showVisualMap,this.heading=e.heading,this.showHeading=e.showHeading,e.stepsize&&(this.stepsize="string"==typeof e.stepsize?u.parse(e.stepsize):e.stepsize),this.additionalParams=e.additionalParams}static dynamic(e){return new h(Object.assign(Object.assign({},e),{embedId:"dynamic"}))}static static(e,t,s){return new h(Object.assign({embedId:e,apiKey:t},s))}toQueryParams(){const e={};if(e.apiKey=this.apiKey,this.sources&&this.sources.length>0){const t=this.sources.map(e=>e.source).join(",");e["sources"]=t,this.sources.forEach(t=>{const s=t.toQueryParams();Object.assign(e,s)})}return this.center?e.center=`${this.center[0]},${this.center[1]}`:(void 0!==this.latitude&&(e.latitude=String(this.latitude)),void 0!==this.longitude&&(e.longitude=String(this.longitude))),void 0!==this.zoom&&(e.zoom=String(this.zoom)),this.soundpack&&(e.soundpack=this.soundpack),void 0!==this.demo&&(e.demo=String(this.demo)),this.title&&(e.title=this.title),void 0!==this.showVisualMap&&(e.showVisualMap=String(this.showVisualMap)),void 0!==this.heading&&(e.heading=String(this.heading)),void 0!==this.showHeading&&(e.showHeading=String(this.showHeading)),this.stepsize&&(e.stepsize=this.stepsize.toString()),this.additionalParams&&Object.entries(this.additionalParams).forEach(([t,s])=>{e[t]=String(s)}),e}toUrl(e="https://audiom-staging.herokuapp.com"){const t=this.toQueryParams(),s=Object.entries(t).map(([e,t])=>`${e}=${t}`).join("&");return`${e}/embed/${this.embedId}?${s}`}toUrlWithBase(e){return this.toUrl(e)}}var l=o(633);const{useState:d,useRef:p}=r.React,m=r.DataSourceManager.getInstance().getDataSources();Object.entries(m).forEach(([e,t])=>{console.log("DataSource ID:",e),console.log("DataSource Type:",t.type)});const g=h.dynamic({apiKey:"wO35blaGsjJREGuXehqWU",sources:[c.fromEsri({source:"units",url:"https://services7.arcgis.com/HDgMIJDCbHtnomY9/ArcGIS/rest/services/ArcGIS_Indoors_Sample_Data_WFL1/FeatureServer/1",name:"Units",mapType:t.Indoor,rules:"/rules/esri-indoor.json"}),c.fromEsri({source:"levels",url:"https://services7.arcgis.com/HDgMIJDCbHtnomY9/ArcGIS/rest/services/ArcGIS_Indoors_Sample_Data_WFL1/FeatureServer/2",name:"Levels",mapType:t.Indoor,rules:"/rules/esri-indoor.json"})],center:[-117.1945001420124,34.05679755835778],showVisualMap:!0,showHeading:!1,zoom:19}),f=g.toUrl("https://audiom-staging.herokuapp.com"),y={1:"BAE9BBC5-D74F-4B7A-9904-9763AE70CCF2",2:"6EA20B7B-4EFD-4B2C-993F-47E12AE0C776",3:"6DE9F705-DA11-4195-84DB-3AB0089D7992"},v=[1,2,3].flatMap(e=>g.sources.filter(e=>"Units"===e.name).map(t=>{let s="";if("Units"===t.name){s=`LEVEL_ID = '{${y[e]}}'`}else"Levels"===t.name&&(s=`LEVEL_NUMBER = ${e}`);return new l.default({url:t.url,title:`Level ${e}`,popupEnabled:!0,opacity:.8,definitionExpression:s,visible:1===e})})),w=e=>{var t;const[s,r]=d(),o=p(!1);return(0,i.jsxs)("div",{className:"jimu-widget",children:[e.useMapWidgetIds&&1===e.useMapWidgetIds.length&&(0,i.jsx)(a.JimuMapViewComponent,{useMapWidgetId:null===(t=e.useMapWidgetIds)||void 0===t?void 0:t[0],onActiveViewChange:e=>{e&&!o.current&&(r(e),v.forEach(t=>{e.view.map.add(t)}),o.current=!0)}}),(0,i.jsx)("iframe",{name:"Test",src:f,width:"100%",height:"100%",title:"test",style:{border:"0px"}})]})};function S(e){o.p=e}})(),n})())}}});